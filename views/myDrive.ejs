<%- include('partials/header.ejs') %>

<div>
  <h1>My Drive</h1>
</div>

<div class="flex">
  <div>
    <%- include('partials/createFolderModal.ejs') %> 
    <%- include('partials/uploadFileModal.ejs') %>
  </div>

  <div>
    <div class="flex">
      <p>Name</p>
      <p>Owner</p>
      <p>Date Modified</p>
      <p>File Size</p>
    </div>
    <% if(locals.data) { %>
      <div>
        <% data.forEach(data => { %>
        <div class="flex">
          <a href="/drive/folder/<%= data.id %>">
            <p><%= data.name %></p>
          </a>
          <div>
            <p><%= user.firstName %> <%= user.lastName %></p>
          </div>
          <div>
            <%= data.updatedAt %>
          </div>
          <div class="flex">
            <button>Edit</button>
            <div>
              <form action="/drive/folder/<%= data.id %>/delete" method="post">
                <input type="hidden" name="previousUrl" value="<%= previousUrl %>" />
                <input type="hidden" name="target_folderId" value="<%= data.id %>" >
                <input type="hidden" name="_method" value="DELETE">
                <button type="submit">Delete</button>
              </form>
            </div>
          </div>
        </div>
        <% }); %>
      </div>
    <% } %>
  </div>
</div>

<!-- <button id="openModalBtn">Add New Folder</button>

<div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <form action="/drive/folder/new" method="post">
      <label for="folder_name">New Folder Name:</label>
      <input
        type="text"
        name="folder_name"
        id="folder_name"
        placeholder="Untitled Folder"
        required
      />
      <button type="submit">Create Folder</button>
    </form>
  </div>
</div> -->

<!-- <button id="openModalBtn">Upload New File</button> -->

<!-- <a href="/drive/file/new">Upload New File</a> -->
<!-- <div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <form action="/drive/file/new" method="post">
      <label for="textInput">Test Text Input:</label>
      <input type="text" name="textInput" id="textInput" /><br />

      <label for="uploaded_file">Upload your file:</label>
      <input type="file" name="uploaded_file" id="uploaded_file" /><br />
      <button type="submit">Submit file</button>
    </form>
  </div>
</div> -->

<script src="/js/modalHandler.js"></script>
<%- include('partials/footer.ejs') %>
